# Chapter2 애플리케이션 계층

## 2.4 DNS: 인터넷의 디렉터리 서비스

DNS(Domain Name System)는 도메인 이름을 IP 주소로 변환하는 인터넷의 **디렉터리 서비스**이다.

### 호스트 식별 방식

- 호스트는 **호스트 이름(hostname)** 과 **IP 주소(IP address)** 로 식별됨.
- 호스트 이름(예: www.google.com)은 사람이 이해하기 쉬운 반면, 라우터는 숫자로 된 IP 주소(예: 142.250.190.14)를 선호.
- 따라서, DNS가 **호스트 이름을 IP 주소로 변환하는 서비스** 를 제공함.

### DNS의 핵심 역할

1. **분산 데이터베이스**: 계층 구조를 가진 여러 DNS 서버들이 정보를 나눠서 관리.
2. **애플리케이션 계층 프로토콜**: 클라이언트(사용자 컴퓨터)가 DNS 서버에 쿼리(Query)를 보내고 응답을 받는 방식으로 동작.

### DNS 동작 과정

1. 사용자가 웹사이트(예: www.someschool.edu)에 접속을 시도하면 브라우저가 **DNS 클라이언트** 를 통해 도메인 이름을 IP 주소로 변환 요청.
2. DNS 클라이언트는 **로컬 DNS 서버** 에 먼저 질의.
3. 로컬 DNS 서버가 IP 주소를 알지 못하면, **루트 DNS 서버** → **TLD DNS 서버** → **권한 DNS 서버** 를 순차적으로 거쳐 최종 IP 주소 획득.
4. 해당 IP 주소를 반환받아 웹서버에 접속.

### 추가 서비스

- **호스트 별칭(Host Aliasing)**: 긴 호스트 이름을 짧고 기억하기 쉬운 별칭(예: www.enterprise.com)으로 설정 가능.
- **메일 서버 별칭(Mail Server Aliasing)**: 도메인에 대한 메일 서버의 실제 호스트명을 쉽게 설정.
- **부하 분산(Load Distribution)**: 여러 개의 IP 주소를 가진 서버에 대한 부하를 균등하게 분산.

---

## 2.5 P2P 파일 분배

P2P(Peer-to-Peer)는 **중앙 서버 없이 사용자들이 직접 파일을 공유하는 방식** 이다.

### P2P vs. 클라이언트-서버 방식

- **클라이언트-서버 방식**: 서버가 모든 클라이언트에게 데이터를 전송 → 서버 부하 증가.
- **P2P 방식**: 데이터를 받은 클라이언트가 **다른 클라이언트에게 데이터를 공유** → 확장성 높음.

### 비트토렌트(BitTorrent) 원리

1. 사용자가 특정 파일을 다운로드하려 하면 **트래커(Tracker)** 가 파일을 가진 피어(Peer) 목록을 제공.
2. 각 피어들은 **파일을 조각(Chunk) 단위로 분할** 하여 서로 공유.
3. 희귀한 조각부터 먼저 다운로드하는 **Rarest First** 기법 사용.
4. 높은 업로드 속도를 제공하는 피어에게 더 많은 데이터를 받는 **Tit-for-Tat** 기법 적용.

---

## 2.6 비디오 스트리밍과 콘텐츠 분배 네트워크 (CDN)

### 2.6.1 인터넷 비디오

- 동영상은 **고해상도일수록 많은 데이터 전송 필요** → 네트워크 성능 중요.
- 비디오 압축 기술을 활용해 **사용자의 인터넷 속도에 맞는 비디오 품질 제공 가능**.

### 2.6.2 HTTP 스트리밍 및 DASH

- **기존 HTTP 스트리밍**: 사용자가 요청하면 **서버에서 전체 비디오를 스트리밍**.
- **DASH (Dynamic Adaptive Streaming over HTTP)**:
  - 여러 품질(고화질, 저화질)로 인코딩된 버전 제공.
  - 사용자의 네트워크 상태를 분석해 최적의 품질 선택.

### 2.6.3 콘텐츠 분배 네트워크(CDN)

CDN(Content Delivery Network)은 **여러 개의 서버를 분산 배치하여 콘텐츠를 빠르게 제공하는 네트워크**이다.

- **CDN 방식**
  1. **Enter Deep**: ISP 내부에 작은 서버를 배치해 사용자의 가까운 위치에서 콘텐츠 제공 (예: Akamai).
  2. **Bring Home**: 주요 데이터 센터(IXP)에 대규모 서버를 배치해 운영 (예: Netflix).

### 2.6.4 사례 연구

- **Netflix**: Amazon 클라우드를 이용해 비디오 파일을 인코딩하고, 자체 CDN을 통해 배포.
- **YouTube**: Google의 CDN을 활용하여 사용자의 가까운 서버에서 스트리밍 제공.
- **Kankan**: CDN과 P2P를 결합하여 **초기에는 CDN을 사용하고, 이후 P2P로 전환**.

---

## 2.7 소켓 프로그래밍: 네트워크 애플리케이션 생성

소켓(Socket)은 **네트워크에서 데이터를 주고받는 창구** 역할을 하는 개념이다.

### 2.7.1 UDP 소켓 프로그래밍

- **UDP는 연결이 필요 없는(비연결성) 빠른 데이터 전송 방식**.
- **특징**:
  - 신뢰성이 낮지만 속도가 빠름 (데이터 손실 가능).
  - 실시간 스트리밍, 온라인 게임 등에 사용.

### 2.7.2 TCP 소켓 프로그래밍

- **TCP는 연결을 맺고 데이터를 신뢰성 있게 전송하는 방식**.
- **특징**:
  - 데이터가 **순서대로 도착**하며, 손실 시 재전송.
  - 웹 브라우징, 파일 전송, 이메일 등에 사용.

---

## 2.8 요약

- **DNS**는 **도메인 이름을 IP 주소로 변환하는 서비스**로, 계층적 구조(루트 서버 → TLD 서버 → 권한 서버)로 이루어짐.
- **P2P 파일 분배**는 서버 부하를 줄이고 **사용자 간 직접 데이터 공유**로 확장성이 뛰어남.
- **비디오 스트리밍**은 DASH 기술을 통해 **적응형 품질 선택**을 제공하며, CDN을 활용해 빠른 전송을 가능하게 함.
- **소켓 프로그래밍**은 UDP와 TCP를 이용해 데이터를 주고받는 **네트워크 프로그래밍 기술**.
---

