#  Chapter2 애플리케이션 계층

## 2.1 네트워크 애플리케이션의 원리
### 2.1.1 네트워크 애플리케이션 구조
- 네트워크 애플리케이션은 **클라이언트-서버 구조** 또는 **P2P 구조**로 설계됨.
- 클라이언트-서버 구조: 서버가 항상 실행 중이며, 클라이언트가 요청을 보냄.
- P2P 구조: 중앙 서버 없이 피어 간에 직접 통신.

### 2.1.2 프로세스 간 통신
- 네트워크에서 실제 통신하는 것은 **프로세스(process)**.
- 프로세스 간 메시지 교환을 통해 통신.
- **클라이언트 프로세스**가 요청을 보내고, **서버 프로세스**가 응답.

### 2.1.3 애플리케이션이 이용 가능한 트랜스포트 서비스
- 애플리케이션은 TCP 또는 UDP 중 적절한 **트랜스포트 프로토콜을 선택**해야 함.
- **TCP (Transmission Control Protocol)**  
  - 신뢰적 데이터 전송, 흐름 제어, 혼잡 제어 제공.
  - 연결 지향적(핸드셰이킹 필요), 데이터 순서 보장.
- **UDP (User Datagram Protocol)**  
  - 비신뢰적 전송, 빠르고 간단한 구조.
  - 연결 설정 불필요, 혼잡 제어 없음.

### 2.1.4 인터넷 전송 프로토콜이 제공하는 서비스
- **TCP 서비스**: 신뢰적 데이터 전송, 연결 지향적, 혼잡 제어 지원.
- **UDP 서비스**: 비연결형, 신뢰성 없음, 빠른 속도.

### 2.1.5 애플리케이션 계층 프로토콜
- 애플리케이션 계층 프로토콜은 **프로세스 간 메시지 전송 방식**을 정의.
- 예: HTTP, FTP, SMTP, DNS 등.

### 2.1.6 이 책에서 다루는 네트워크 애플리케이션
- 주요 애플리케이션: **웹 (HTTP), 전자메일 (SMTP, IMAP), DNS, P2P 파일 공유, 비디오 스트리밍**.

---

## 2.2 웹과 HTTP
### 2.2.1 HTTP 개요
- **HTTP(HyperText Transfer Protocol)**: 웹에서 클라이언트와 서버 간 메시지 교환을 담당.
- **비상태 프로토콜(stateless protocol)**: 서버는 클라이언트의 이전 요청을 기억하지 않음.

### 2.2.2 비지속 연결과 지속 연결
- **비지속 연결 (non-persistent connection)**  
  - 요청마다 새로운 TCP 연결을 생성.
  - 응답 후 연결 종료 → **지연 증가**.
- **지속 연결 (persistent connection)**  
  - 하나의 TCP 연결을 여러 요청에 사용.
  - **응답 시간 단축, 리소스 절약**.

### 2.2.3 HTTP 메시지 포맷
- **요청 메시지(Request Message)**  
  - GET, POST, HEAD, PUT, DELETE 방식 사용.
- **응답 메시지(Response Message)**  
  - 상태 코드 포함 (예: `200 OK`, `404 Not Found`).

### 2.2.4 사용자와 서버 간의 상호작용: 쿠키
- HTTP는 비상태 프로토콜 → 서버가 **사용자를 식별할 수 있도록 쿠키(cookie) 사용**.
- 쿠키 구성 요소:
  1. 서버가 `Set-Cookie` 헤더를 통해 쿠키 전달.
  2. 브라우저가 쿠키를 저장.
  3. 이후 요청 시 `Cookie` 헤더 포함하여 서버로 전송.

### 2.2.5 웹 캐싱
- 웹 캐시(Web Cache, 프록시 서버)는 요청된 웹 페이지를 저장하여 **응답 속도를 향상**.
- 조건부 GET(Conditional GET)
  - `If-Modified-Since` 헤더를 이용하여 최신 콘텐츠인지 확인.
  - **304 Not Modified** 응답 시 기존 캐시 데이터 사용.

### 2.2.6 HTTP/2
- **HTTP/1.1의 성능 문제 해결**을 위해 개발됨.
- **프레이밍 (Framing)** 기법을 사용하여 HOL 블로킹 문제 해결.
- 하나의 TCP 연결을 사용하면서도 **멀티플렉싱(Multiplexing)** 지원.
- **서버 푸시(Server Push)** 기능으로 응답 속도 개선.

---

## 2.3 인터넷 전자메일
### 2.3.1 SMTP (Simple Mail Transfer Protocol)
- **SMTP (RFC 5321)**는 **메일을 전송**하는 프로토콜.
- **서버 간 직접 연결**하여 메일을 보냄.
- **푸시(Push) 방식**으로 동작.

### 2.3.2 메일 메시지 포맷
- **RFC 5322에 정의된 메일 메시지 형식**:
  - **헤더(Header)**: `From:`, `To:`, `Subject:` 필수.
  - **몸체(Body)**: 본문 내용 포함.

### 2.3.3 메일 접속 프로토콜
- SMTP는 **메일을 보내는 역할**, 메일을 가져올 때는 다른 프로토콜 사용.
- **메일을 받는 방법**
  1. **웹 기반 메일 (HTTP 사용)** → Gmail, 네이버 메일 등.
  2. **메일 클라이언트 (IMAP/POP3 사용)**
     - **IMAP (Internet Mail Access Protocol)**  
       - 서버에 메일 저장, **여러 기기에서 동기화 가능**.
     - **POP3 (Post Office Protocol 3)**  
       - 메일을 **다운로드 후 서버에서 삭제**.

