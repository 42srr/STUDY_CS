---
id: "[42GGS-Study] 컴퓨터 네트워킹 - 9주차"
aliases:
  - "[42GGS-Study] 컴퓨터 네트워킹 - 9주차"
tags:
  - 42GGS
  - CS
  - Study
  - Network
---

# [42GGS-Study] 컴퓨터 네트워킹 - 9주차

## Chapter 05. 네트워크 계층: 제어 평면

### 5.5 소프트웨어 정의 네트워크(SDN) 제어 평면

#### SDN 구조의 특징

- 플로우 기반 포워딩 : 트랜스포트 계층, 네트워크 계층, 링크 계층 등 다양한 헤더 값에 기반한 포워딩 가능 

- 데이터 평면과 제어 평면의 분리

- 네트워크 제어 기능이 데이터 평면 스위치 외부에 존재

- 프로그램이 가능한 네트워크

#### 5.5.1 SDN 제어 평면: SDN 컨트롤러와 SDN 네트워크

- SDN 컨트롤러 기능
  - 통신 계층
    : SDN 컨트롤러와 제어받는 네트워크 장치 사이 통신 필요. `사우스바운드(southbound)` 를 통해 통신
  - 네트워크 전역 상태 관리 계층
    : 컨트롤러는 네트워크 제어를 위해 개별 스위치 플로우 테이블의 카운터 값 등 여러 전역 상태들을 저장
  - 네트워크 제어 애플리케이션 계층과의 인터페이스
    : 컨트롤러는 `노스바운드(northbound)` 인터페이스를 통해 네트워크 제어 애플리케이션과 상호작용

#### 5.5.2 OpenFlow 프로토콜

- `컨트롤러`가 제어 중인 `스위치`로 전달하는 메시지의 예시
  - 설정 : 컨트롤러가 스위치 설정 파라미터들을 문의, 설정하는데 이용
  - 상태 수정 : 컨트롤러가 스위치 플로우 테이블 엔트리 추가/제거 등의 작업을 위해 사용
  - 상태 읽기 : 컨트롤러가 스위치 플로우 테이블과 포트로부터 통계 정보, 카운터 값을 얻기 위해 사용
  - 패킷 전송 : 컨트롤러가 제어 중인 스위치의 지정된 포트에서 특정 패킷을 내보내기 위해 사용

- `스위치`가 `컨트롤러`로 전달하는 메시지의 예시
  - 플로우 제거 : 플로우 테이블 엔트리가 시간의 만료 또는 상태 수정 메세지로 인해 삭제되었음을 알림
  - 포트 상태 : 포트 상태 변화 알림
  - 패킷 전달 : 일치되는 엔트리가 없는 패킷, 또는 특정 처리가 필요한 패킷을 컨트롤러로 전달

#### 5.5.3 데이터 평면과 제어 평면의 상호작용: 예제

- SDN 과 라우터별 제어 알고리즘 차이
  - 다익스트라 알고리즘이 패킷 스위치 외부에서 별도 애플리케이션으로 수행
  - 패킷 스위치들의 링크 갱신 정보를 SDN 컨트롤러에게 전송
  - OpenFlow 프로토콜 사용

#### 5.5.4 SDN: 과거와 미래

- (생략)

### 5.6 인터넷 제어 메세지 프로토콜 (ICMP)

- 호스트 - 라우터 간 네트워크 계층 정보 교환에 사용
- 구조적으로 `ICMP 메세지`는 `IP 데이터그램`에 담겨 전송
  상위 계층 프로토콜 번호가 `1`이면 `ICMP` 의미 → 호스트가 해당 내용을 `ICMP` 로 역다중화

<figure style="display: flex; flex-direction: column; align-items: left;">
  <img alt="ICMP 메세지 타입" src="https://user-images.githubusercontent.com/86337233/213726337-f62a70cd-a7c6-4384-91e5-c692228d6fa0.png">
  <figcaption> 그림 5.19  ICMP 메세지 타입</figcaption>
</figure>

#### Traceroute 프로그램 원리

- 호스트 자신과 목적지 호스트 사이의 라우터 수, 정체, 그리고 두 호스트 간 왕복 시간 측정
    1. 출발지 Traceroute는 일련의 `IP 데이터그램`을 목적지에 전송
        - 각각의 데이터그램은 임의의 UDP 포트로 `UDP 세그먼트` 전송
        - TTL 값은 첫번째 데이터그램이 1, 두번째는 2, 세번째는 3, ...
    2. 출발지는 각 데이터그램에 대해 타이머 작동 시작
        - n번째 데이터그램이 n번째 라우터 도착시 데이터그램 TTL 만료
    3. 라우터는 데이터그램 폐기 후 `ICMP 경고 메시지(타입 11, 코드 0)`를 출발지에 전송
        - 이 경고 메시지는 `라우터 이름`, `IP 주소` 포함
    4. 라우터가 전송한 `ICMP 메시지`가 출발지에 도착하는 경우 출발지는 아래 2가지 정보 획득
        - 왕복 시간(round-trip time, RTT) - 타이머에 의해 알게됨
        - `n`번째 `라우터의 주소와 이름` - `ICMP 메세지` 에 의해

- Traceroute 출발지가 UDP 세그먼트 전송을 중단하는 시점
    1. 출발지가 자신이 보내는 각 데이터그램마다 차례로 TTL을 1씩 증가시키기 때문에  
       이들 데이터그램 중 하나는 결국 목적지 호스트에 도착하게 될 것이다.
    2. 이 데이터그램은 없을 것 같은 UDP 포트 번호를 가진 UDP 세그먼트를 포함하고 있으므로,  
       목적지 호스트는 `포트 도달 불가능 ICMP 메시지(타입 3, 코드 3)`를 출발지에 보낸다.
    3. 출발지 호스트가 이 ICMP 메시지를 받게 되면 추가적인 탐색 패킷을 보낼 필요가 없음을 알게 된다.

### 5.7 네트워크 관리와 SNMP, NETCONF/YANG

#### 5.7.1 네트워크 관리 프레임워크

- 네트워크 관리 핵심 요소
    - 관리 서버
    - 관리 대상 장치
    - 데이터
    - 네트워크 관리 에이전트
    - 네트워크 관리 프로토콜

- 네트워크 관리 방법
    - CLI
    - SNMP (Simple Network Management Protocol) / MIB (Management Information Base)
    - NETCONF / YANG

#### 5.7.2 SNMP 와 MIB

- SNMPv3(Simple Network Management Protocol Version 3\[[RFC 3410](https://datatracker.ietf.org/doc/html/rfc3410)\])
  관리 서버 - 에이전트 간 관리 제어 및 정보 메세지 전달에 사용
  - `요청-응답 모드` : 대상 장치와 관련된 MIB 객체 값의 질의(검색) 또는 수정(설정)
  - `Trap Message` : 예외 상황으로 인한 MIB 객체값 변화 통지

- 표 5.2 SNMPv3 PDU 타입

| SNMPv2 PDU 타입 | 송신자-수신자   | 설명                                                        |
|-----------------|-----------------|-------------------------------------------------------------|
| GetRequest      | 관리자-에이전트 | 하나 또는 그 이상의 MIB 객체 인스턴스의 값을 가져옴         |
| GetNextRequest  | 관리자-에이전트 | 목록 또는 테이블에서 다음 MIB 객체 인스턴스의 값을 가져옴   |
| GetBulkRequest  | 관리자-에이전트 | 큰 블록 단위의 데이터를 가져옴<br>예를 들면, 큰 테이블의 값 |
| InformRequest   | 관리자-관리자   | 원격으로 접근하는 원격 관리 서버에세 MIB 값을 알림          |
| SetRequest      | 관리자-에이전트 | 하나 또는 그 이상의 MIB 객체 인스턴스들의 값들을 설정       |
| Response        | 에이전트-관리자<br>또는<br>관리자-관리자| GetRequest, GetNextRequest, GetBulkRequest, SetRequest PDU, 또는 InformRequest 에 대한 응답으로 발생 |
| SNMPv2-Trap     | 에이전트-관리자 | 관리자에게 예외적인 이벤트 발생을 알린다                    |

<figure>
  <img alt="SNMP PDU 포맷" src="https://user-images.githubusercontent.com/86337233/213753145-8adb9a82-8229-4746-8ef0-41027b47f82a.png">
  <figcaption>그림 5.21  SNMP PDU 포맷</figcaption>
</figure>

#### 5.7.3 네트워크 설정 프로토콜 (NETCONF) 와 YANG

- NETCONF 프로토콜
  : 피관리 장치의 설정 데이터 검색, 셋업, 수정, 동작데이터 / 통계 데이터 질의,  피관리 장치의 알림 구독을 위한 메세지 전송 기능 제공. XML 형식, RPC (Remote Procedure Call) 패러다임 사용

- 표 5.3  주요 NETCONF 작업

| NETCONF 작업 | 설명 |
|-----------|--------|
| <get-config> | 어떤 설정의 전체(또는 일부) 검색. 하나의 장치가 여러 설정을 가질 수 있음.<br> running/ 설정을 통해 현재 장치에서 실행 중인 설정을 알 수 있음 |
| <get> | 설정 상태 및 동작 상태 데이터의 전체 또는 일부를 검색 |
| <edit-config> | 피관리 장치 특성의 전체 또는 일부 변경. running/ 설정 지정을 통해 현재 실행 중인 설정 변경 가능. 피관리 장치에서 요청 처리가 가능하면 <ok> 요소가 포함된 <rpc-reply> 가 전송, 그렇지 않으면 <rpc-error> 가 전송됨|
| <lock>, <unlock> | 피관리 장치의 전체 설정 데이터 저장소 시스템의 잠금 / 잠금해제 |
| <create-subscription>, <notification> | 구독을 종료할 때까지 관심 있는 특정 이벤트 알림(<notification>)을 피관리 장치에서 관리 서버로 비동기 전송하도록 지시 |

- YANG
  : NETCONF 가 사용하는 네트워크 관리 데이터의 구조, 구문 및 의미를 표현하기 위해 사용되는 데이터 모델링 언어
