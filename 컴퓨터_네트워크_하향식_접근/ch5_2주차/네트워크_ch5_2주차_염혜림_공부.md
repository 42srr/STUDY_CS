# 네트워크 계층: 제어 평면

## 5. 소프트웨어 정의 네트워크 SDN 제어평면
| 앞서 설명한 것 처럼 제어평면이란? 
| **네트워크의 트래픽**을 어디로 보낼지 결정하는 역할 담당
| e.g. 라우팅 테이블 계산 / 어떤 패킷을 차단할지 정책을 만드는 일 함

### 그래서.. SDN은?
=> SDN에서는 제어 기능을 중앙 집중식 -> 컨트롤러가 맡음
----
[응용 평면 (Application Plane)]
     ↑
[제어 평면 (Control Plane)] ← SDN 컨트롤러
     ↑
[데이터 평면 (Data Plane)] ← 스위치, 라우터 등

- 데이터 평면
**실제로 패킷을 전송**하는 하드웨어 장치

- 제어 평면
SDN 컨트롤러가 위치. 
네트워크의 정책을 설정.
스위치에 명령을 내림.

- 응용 평면
네트워크 앱(예: 방화벽, 로드밸런서 등)이 제어 평면에 정책을 **요청**
----

### OpenFlow는...
| 컨트롤러와 스위치 간의 통신을 위한 프로토콜
-> 컨트롤러가 메신저 역할을 함
=>스위치에게 "~~는 **하게 처리해" 라고 명령
(OpenFlow 프로토콜은 SDN 컨트롤러와 SDN으로 제어되는 스위치 또는 OpenFlow API를 구현하는 다른 장치와의 사이에서 동작한다.)...????

## 6.인터넷 제어 메시지 프로토콜(ICMP)

### ICMP란?
| ICMP는 인터넷 세상의 ‘전달 도우미’이자 ‘문제 알림이’
| 평소에는 조용히 있다가, 뭔가 문제가 생기면 **“여기 문제 있어요!”** 하고 알려줌

### 비유로 알아보기
우리가 집에서 **편지를 보낸다고** 생각하기.
그런데 그 편지가 잘 도착했는지, 길을 잃어버리진 않았는지, 중간에 문제가 생기진 않았는지...  
**궁금하잖아?**

이럴 때, 누군가가 대신 말해주는 거야.  
> “편지 잘 도착했어요!”  
> “주소가 틀렸어요!”  
> “중간에 편지가 너무 많아서 밀렸어요!”

바로 이 역할을 하는 게 **ICMP (Internet Control Message Protocol)**야.
ICMP는 '메신저' 같은 존재.
인터넷에서 컴퓨터들끼리 메시지를 주고받을 때 문제가 생기면,  
ICMP가 **“야야야! 여긴 막혔어!”**, **“못 가!”**, **“됐어, 잘 도착했어!”**  
이렇게 알려주는 역할을 함.

### 예시 1: `ping`이 뭐냐면...
- `ping google.com` → 구글한테 "살아있니?"라고 물어봄
- 구글이 ICMP로 "응! 나 살아있어!"라고 응답
- 그래서 **ping 명령어 = ICMP 메시지를 보내는 도구**

### 예시 2: 목적지에 못 가면?
- 컴퓨터가 웹사이트에 연결하려고 했는데, 꺼져 있거나 중간에 네트워크가 끊겼다면
- ICMP가 "못 가요!"라고 알려줌

### 장점
1. **문제 진단이 쉬움**  
2. **간단하고 빠름**  
3. **기본 기능** (거의 모든 장비가 지원)

### 단점
1. **보안에 취약할 수 있음** (`ping flood`, `smurf attack` 등)
2. **응답이 없다고 무조건 문제는 아님** (방화벽에서 막을 수도 있음)
3. **기능이 제한적** (간단한 메시지만 가능)

### 실무에서 쓰는 사례
1. 서버 상태 확인
- `ping`으로 서버가 살아있는지 확인
2. `traceroute`로 경로 분석
- 클라이언트가 못 들어간다고 할 때 어디서 막혔는지 분석
3. 모니터링 시스템에 적용
- 주기적으로 ICMP 보내서 서버 상태 체크

## 7. 네트워크 관리와 SNMP, NETCONF/YANG

### SNMP (Simple Network Management Protocol)
| SNMP는 가장 오래되고 널리 쓰이는 네트워크 관리 프로토콜.
| => **네트워크 장비(예: 스위치, 라우터)한테 “너 지금 상태 어때?” 라고 물어보는 방법**

### 구성 요소
- **Manager**: 정보를 요청하는 주체 (예: 네트워크 관리자 시스템)
- **Agent**: 정보를 제공하는 장비 안의 소프트웨어
- **MIB (Management Information Base)**: 장비의 정보를 정의한 데이터 구조

### SNMP 동작 방식
1. Manager가 Agent에게 요청(GET)
2. Agent가 정보를 응답
3. 또는 문제가 생기면 Agent가 먼저 알려줌(TRAP)

### 장점
1. 대부분의 장비에서 기본으로 지원
2. 간단하고 빠르게 장비 상태를 확인할 수 있음

### 단점
1. 보안이 약함 (SNMPv1, v2c는 암호화 없음)
2. 복잡한 설정을 하기엔 한계가 있음

---

## NETCONF와 YANG
| SNMP는 간단한 상태 확인은 좋지만, **정교한 설정 변경**에는 부족.
| => **NETCONF(Network Configuration Protocol)**

**NETCONF**
: 장비 설정을 안전하게 바꾸기 위한 프로토콜
**YANG**
:NETCONF의 설정 내용을 표현하는 **언어(데이터 모델)**

### NETCONF의 특징
- XML 기반으로 통신
- 트랜잭션 지원: 설정 중간에 실패해도 되돌릴 수 있음
- SSH를 사용해서 보안도 뛰어남

### YANG의 역할
- 설정 가능한 항목들이 어떤 구조인지 정의
- NETCONF가 장비 설정을 읽고 쓸 때, YANG을 참고함

### 장점
1. 설정을 체계적으로 관리할 수 있음
2. 장비 간에 일관된 설정 구조 제공
3. 자동화 도구와 잘 어울림 (예: Ansible, Python 스크립트 등)

### 단점
1. SNMP보다 어렵고 무거움
2. 모든 장비가 아직 NETCONF/YANG을 지원하진 않음

## 실무에서의 활용
1. **SNMP**: 서버나 스위치의 CPU 사용량, 포트 트래픽 확인. Zabbix나 PRTG 같은 툴과 연동
2. **NETCONF/YANG**: 대규모 네트워크에서 자동으로 구성 변경. 예: 수백 개 장비에 동시에 설정 적용
3. **네트워크 관리 시스템**: 여러 장비의 상태를 한눈에 보여주는 대시보드를 만들어, 관리자들이 빠르게 문제를 찾고 대응
