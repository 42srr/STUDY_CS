# Chapter 3: 트랜스포트 계층 요약

## 3.1 소개 및 트랜스포트 계층 서비스
트랜스포트 계층은 애플리케이션 계층과 네트워크 계층 사이에서 동작하며, 서로 다른 호스트에서 실행되는 애플리케이션 프로세스 간의 통신을 담당합니다. 논리적인 통신을 제공하여 애플리케이션이 물리적 네트워크 구조를 신경 쓰지 않고 데이터를 송수신할 수 있도록 한다.

트랜스포트 계층은 네트워크 계층 위에서 동작하며, 네트워크 계층이 호스트 간 논리적 통신을 제공하는 반면, 트랜스포트 계층은 프로세스 간 논리적 통신을 제공합니다. 이 계층에서 가장 중요한 프로토콜은 **UDP(User Datagram Protocol)** 와 **TCP(Transmission Control Protocol)** 이다.

## 3.2 멀티플렉싱과 디멀티플렉싱
트랜스포트 계층은 **멀티플렉싱(multiplexing)** 과 **디멀티플렉싱(demultiplexing)** 기능을 수행한다.

- **멀티플렉싱**: 여러 애플리케이션 프로세스가 동일한 네트워크 연결을 공유할 수 있도록 데이터를 패킷화하여 네트워크 계층으로 전달하는 과정.
- **디멀티플렉싱**: 수신된 패킷을 해당하는 애플리케이션 프로세스에 전달하는 과정.

트랜스포트 계층은 송신 및 수신 시 소켓과 포트 번호를 이용하여 데이터가 올바른 프로세스로 전달될 수 있도록 한다. TCP와 UDP 모두 멀티플렉싱과 디멀티플렉싱을 지원하지만, TCP는 연결 지향적이고 UDP는 비연결형이다.

## 3.3 비연결형 전송: UDP
UDP는 단순한 전송 계층 프로토콜로, 데이터그램 서비스와 최소한의 오류 검출 기능을 제공한다.

### UDP의 특징
- 연결 설정 없이 데이터 전송 가능
- 신뢰성 없는 서비스 (데이터 손실 가능)
- 작은 헤더(8바이트)로 효율적
- 실시간 스트리밍, DNS, VoIP 등에서 주로 사용됨

UDP는 신뢰성을 보장하지 않으므로 애플리케이션이 자체적으로 오류 검출 및 복구 기능을 구현해야 한다.

## 3.4 신뢰할 수 있는 데이터 전송 원칙
신뢰할 수 있는 데이터 전송을 위해 다음과 같은 기술이 사용된다.

1. **에러 검출(Error Detection)**: 체크섬 등을 사용하여 데이터 오류 확인
2. **ACK/NAK**: 데이터가 제대로 전달되었는지 확인하는 긍정/부정 응답
3. **재전송(Retransmission)**: 손실된 패킷을 다시 전송
4. **순서 제어(Sequence Control)**: 패킷이 올바른 순서로 도착하도록 관리
5. **흐름 제어(Flow Control)**: 수신자의 처리 속도를 고려하여 데이터 전송 속도 조절
6. **혼잡 제어(Congestion Control)**: 네트워크 혼잡 상태를 감지하여 전송 속도를 조절

## 3.5 신뢰할 수 있는 연결형 전송: TCP
TCP는 신뢰성 있는 데이터 전송을 제공하는 프로토콜로, 다음과 같은 특징이 있다.

### TCP의 주요 기능
- **연결 설정 및 해제 (Three-Way Handshake)**: 연결을 설정하고 종료하는 과정
- **순서 제어 및 오류 검출**: 패킷이 손실되지 않고 올바르게 전달되도록 보장
- **흐름 제어**: 수신자가 처리할 수 있는 속도로 데이터 전송 조절
- **혼잡 제어**: 네트워크 과부하 방지

TCP는 신뢰성을 보장하기 위해 다양한 메커니즘을 활용하며, 인터넷에서 가장 널리 사용되는 트랜스포트 계층 프로토콜이다.

## 3.6 패킷 손실 시 데이터 전송 기법
트랜스포트 계층에서 패킷 손실을 처리하는 두 가지 주요 방식이 있다.

- **Go-Back-N(GBN)**: 손실된 패킷 이후의 모든 패킷을 재전송하는 방식
- **Selective Repeat(SR)**: 손실된 패킷만 선택적으로 재전송하는 방식

SR은 효율적이지만 구현이 복잡하고, GBN은 구현이 단순하지만 불필요한 재전송이 발생할 수 있다.

## 3.7 TCP 혼잡 제어
TCP는 네트워크 혼잡을 방지하기 위해 다음과 같은 기법을 사용한다.

1. **Slow Start**: 초기에 작은 윈도우 크기로 시작하여 점진적으로 증가
2. **Congestion Avoidance**: 혼잡이 감지되면 윈도우 크기를 조절하여 속도를 유지
3. **Fast Retransmit & Fast Recovery**: 중복 ACK를 감지하면 빠르게 손실된 패킷을 재전송

이러한 기법을 통해 TCP는 네트워크 자원을 효율적으로 활용하면서 신뢰성 있는 전송을 보장한다.


