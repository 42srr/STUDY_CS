# 1장 컴퓨터 네트워크와 인터넷 - 1

# 1.1 인터넷이란 무엇인가?

---

1. 인터넷의 구성요소로 기술 가능 - **하드웨어**와 **소프트웨어** 구성요소를 기술
2. 분산 애플리케이션에 서비스를 제공하는 **네트워킹 인프라스트럭처** 관점에서의 인터넷

## 1.1.1 구성요소로 본 인터넷

---

### 인터넷이란?

- **네트워크의 네트워크**
- 전 세계적으로 수십억 개의 컴퓨팅 장치를 연결하는 컴퓨터 네트워크.
- 스마트폰과 IoT의 발달로 전통적인 컴퓨터와 서버 시절보다 사용자 폭증, 전 세계 인구의 75%가 인터넷 사용자일 것으로 예상됨(2025년 기준)

### **호스트(host), 종단 시스템(end system)**

- 컴퓨터 네트워크에 연결된 컴퓨팅 장치
- 종단 시스템은 **통신 링크(communication link)**와 **패킷 스위치(packet switch)**의 네트워크로 연결됨.

### 통신 링크**(communication link)**

- 동축케이블, 구리선, 광케이블 등 다양한 물리 매체(physical media)로 구성됨
- 각 링크들은 다양한 **전송률(transmission rate)**를 이용하여 데이터를 전송함
- 전송률은 초당 비트 수를 의미하는 bps(bit per second)단위를 사용함.

### **패킷(packet)**

- 보내려는 데이터를 세그먼트(segment)로 나누고, 각 세그먼트에 헤더를 붙여 만들어진 정보 패키지이다.
- 패킷은 목적지에서 원래의 데이터로 다시 조립된다.

### **패킷 교환기(스위치)**

- 입력 통신 링크로 도착하는 패킷을 받아서 → 출력 통신 링크로 그 패킷을 전달한다.
- **라우터(Router)**와 **링크 계층 스위치(Link-layer switch):** 오늘날 가장 널리 사용되는 두 가지의 패킷교환기, 이러한 스위치는 최종 목적지 방향으로 패킷을 전달한다.
    - 링크 계층 스위치는 보통 접속 네트워크에서 사용되고, 라우터는 네트워크 코어에서 사용된다.

### **경로**(**route** 또는 **path**)

- 패킷이 송신 종단 시스템에서 수신 종단 시스템에 도달하는 동안 **거쳐온 일련의 통신 링크와 패킷 스위치등의 경로**.

### **ISP(internet service provider)**

- 패킷 스위치와 통신 링크로 이루어진 네트워크
- 종단 시스템에게 다양한 네트워크 접속을 제공하고, 또한 CP(Content provider)에게도 인터넷 접속을 제공한다.
- 인터넷은 종단 시스템을 서로 연결하는 것이므로 I**SP들도 서로 연결되어야만 함**.
- 하위 계층 ISP는 국가, 그리고 국제 상위 계층 ISP를 통해 서로 연결한다. 그리고 이들 상위 계층 ISP는 서로 직접 연결된다.(이들 상위계층은 광 링크로 연결된 고속 라우터로 구성됨)
- 상위든 하위든 각 ISP 네트워크는 따로 관리되고, IP 프로토콜을 수행하며, 네이밍(naming)과 주소배정 방식을 따름

### **프로토콜(Protocol)**

- 컴퓨터나 네트워크 장치들 사이에서 정보송수신의 방식을 정의하는 규칙과 절차의 집합.
- 이는 효율적이고 정확한 통신을 가능하게 하는 표준화된 방법을 제공함.
- 종단 시스템, 패킷 스위치를 비롯한 인터넷의 구성요소들은 이러한 프로토콜을 수행함.
- TCP(Transmission Control Protocol) / IP(Internet Protocol)
    - 인터넷에서 가장 중요한 프로토콜
- ITEF(Internet Engineering Task Force)에서 인터넷 표준을 개발하며, ITEF 표준문서를 RFC(request for comment)라고 한다.
    - TCP, IP, HTTP, SMTP(전자메일에서 이용) 같은 프로토콜을 정의. 현재 약 9,000개 이상의 RFC가 있다.

## 1.1.2 서비스 측면에서 본 인터넷

---

인터넷은 **애플리케이션에 서비스를 제공하는 인프라스트럭처**이다.

- **분산 애플리케이션(distributed application)**
    - 전통적인 애플리케이션: 전자메일, 웹 서핑 등
    - 실시간 도로 교통 정보를 반영한 지도 서비스, 음악 및 영화 스트리밍, 온라인 소셜 미디어, 멀티플레이어 게임, 위치 기반 추천 시스템등 스마트폰 앱 포함.
    - 이러한 애플리케이션은 서로 데이터를 교환하는 많은 종단 시스템을 포함하기 때문에 분산 애플리케이션이라고 불림.
    - **인터넷 애플리케이션은 종단 시스템에서 수행**된다(네트워크 코어에 있는 패킷 교환기에서 수행되지 않음)
        - 패킷 교환기는 종단 시스템 간의 데이터 교환을 쉽게 해주지만 이들은 데이터의 시작과 끝인 애플리케이션에는 관심이 없다

### **소켓 인터페이스(socket interface)**

> 애플리케이션은 종단 시스템에서 수행되기 때문에 C나 JAVA등 프로그래밍 언어를 통해서 작성된다.
이때, 서로 다른 종단 시스템에서 수행되는 프로그램은 서로에게 데이터를 송신할 필요가 있다. 그렇다면 어떻게 종단 시스템들이 서로 데이터를 송수신 하도록 인터넷에 지시할 것인가?
> 
- 한 종단 시스템에서 수행되는 프로그램이 다른 종단 시스템에서 수행되는 목적 프로그램으로 데이터를 전달하도록 **어떻게 인터넷 인프라스트럭처에 요구하는지**를 명시하는 것.
    - 인터넷에 접속된 종단 시스템들은 소켓 인터페이스를 모두 가지고 있다.
- 소켓 인터페이스는 **송신 프로그램이 따라야 하는 규칙의 집합**이며, 인터넷은 이 규칙에 따라 데이터를 목적지 프로그램으로 전달한다.
    - 편지를 부칠 때 편지를 봉투에 넣어서 주소를 적고 우편을 붙이는 것과 비슷한 원리이다.
    - 우편에도 보통 우편, 특급, 배달 증명 등이 있듯이 인터넷도 여러 서비스를 애플리케이션에 제공한다. 인터넷 애플리케이션을 개발할 때에는 이러한 인터넷 서비스 중에 하나를 선택해야 한다.

## 1.1.3 프로토콜이란 무엇인가?

---

### 프로토콜

> 프로토콜은 둘 이상의 통신 개체 간에 교환되는 메시지 포맷과 순서뿐만 아니라, 메시지의 송수신과 다른 이벤트에 따른 행동들을 정의한다.
> 
- 네트워크 프로토콜과 사람과의 비교
    
    ![image.jpeg](1%E1%84%8C%E1%85%A1%E1%86%BC%20%E1%84%8F%E1%85%A5%E1%86%B7%E1%84%91%E1%85%B2%E1%84%90%E1%85%A5%20%E1%84%82%E1%85%A6%E1%84%90%E1%85%B3%E1%84%8B%E1%85%AF%E1%84%8F%E1%85%B3%E1%84%8B%E1%85%AA%20%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%20-%201%201961eb7f1e1f80cab936f0f7a92cb629/image.jpeg)
    
    - 핵심은 두 개체 간 어떤 일을 수행하려면 둘 이상의 통신 개체(entity)가 **함께 인식하는 프로토콜**이 필요 **통신 규약**이 필요함
    - 프로토콜은 인터넷의 모든 영역에서 작동한다.
        - e.g.) 종단 시스템에 있는 혼잡 제어 프로토콜은 송수신자 간에 전송되는 패킷 전송률을 조절함
        - e.g.) 라우터에서 프로토콜은 출발지에서 목적지까지 패킷 경로를 설정함
    

# 1.2 네트워크의 가장자리

---

**종단 시스템(end system)**은 웹 브라우저 프로그램, 웹 서버 프로그램, 전자메일 클라이언트 프로그램 같은 애플리케이션을 수행하므로 **호스트(host)**라고도 부른다.

또한 이 호스트는 **클라이언트(Client)**와 **서버(Server)**로 구분된다.

## 1.2.1 접속 네트워크(access network)

---

종단 시스템을 경로 상의 **첫 번째 라우터(가장자리 라우터(edge router)**라고도 함**)에 연결하는 네트워크** 

- 가정 접속: DSL, 케이블, FTTH, 5G 고정 무선
    - DSL: 기존 로컬 전화 인프라스트럭처 사용
    - 케이블: 기존 케이블 TV 회사의 인프라스트럭처 사용
    - FTTH: 위의 접속 유형들보다 빠른 속도를 제공하는 기술
        - 지역 중앙국에서 가정까지 직접 광섬유 경로를 제공
- 기업(그리고 가정) 접속: 이더넷과 와이파이
    - LAN(Local Area Network): 종단 시스템을 가장자리 라우터에 연결하는데 사용됨.
    - 이더넷(Ethernet): 이더넷 스위치 혹은 상호연결된 스위치의 네트워크는 더 큰 인터넷으로 연결됨
    - 무선 랜 환경: 무선 랜 환경에서 사용자들은 기업 네트워크에 연결된 AP(Access Point)로 패킷을 송수신 하고, AP는 유선 네트워크에 다시 연결됨
- 광역 무선 접속: 3G와 LTE 4G와 5G
    - 기지국의 수십 킬로미터 반경 내에 있으면 작동

## 1.2.2 물리 매체

---

> 비트는 물리 매체(physical media)상에 전자파나 광 펄스를 전파하여 전송한다.
> 
- 물리 매체는 여러 형태이며, **경로상의 각 송신기-수신기 쌍에 대해 같은 유형일 필요는 없다.**
- e.g., 꼬임쌍선, 동축케이블, 다중모드 광섬유 케이블, 지상파와 위성파 등
- 두 가지 종류
    - **유도 매체(guided media)** : 꼬임쌍선, 동축케이블, 광섬유 케이블과 같은 **견고한 매체를 따라 파형을 유도**
    - **비유도 매체(unguided media)** : 무선 랜 혹은 디지털 위성 채널처럼 **야외 공간으로 파형을 전파**

### 꼬임쌍선

### 동축케이블

### 광섬유

### 지상 라디오 채널

### 위성 라디오 채널

# 1.3 네트워크 코어

---

패킷 스위치와 링크의 그물망을 살펴본다.

**링크와 스위치의 네트워크를 통해 데이터를 이동시키는** 두 가지 기본 방식이 있다.

1. **패킷 교환(packet switching)** : 보장되지 않는 (e.g., 인터넷)
2. **회선 교환(circuit switching)** : 자원을 예약 → 보장된

## 1.3.1 패킷 교환

네트워크 애플리케이션에서 종단 시스템들은 서로 **메시지(message)**를 교환한다.

출발지 종단 시스템에서 목적지 종단 시스템으로 메시지를 보내기 위해

1. 송신 시스템은 긴 메시지를 **패킷(packet)**이라고 하는 작은 데이터 덩어리로 분할한다.
2. 송신 측과 수신 측 사이에서 각 패킷은 **통신 링크**와 **패킷스위치(라우터와 링크 계층 스위치)**를 거치게 된다. 
3. 패킷은 링크의 최대 전송률과 같은 속도로 각각의 통신링크에서 전송된다. 
    1. 출발지 종단 시스템 혹은 패킷 스위치가 `R비트/초`의 속도로 링크에서 `L비트의 패킷을 송신`한다면, 그 패킷을 전송하는데 걸리는 시간은 `L/R초`다.

### 저장-후-전달(store-and-forward transmission)

---

> 스위치가 패킷의 첫 비트를 출력 링크로 전송하기 전에 **전체 패킷**을 받아야 한다.
> 

![image.png](1%E1%84%8C%E1%85%A1%E1%86%BC%20%E1%84%8F%E1%85%A5%E1%86%B7%E1%84%91%E1%85%B2%E1%84%90%E1%85%A5%20%E1%84%82%E1%85%A6%E1%84%90%E1%85%B3%E1%84%8B%E1%85%AF%E1%84%8F%E1%85%B3%E1%84%8B%E1%85%AA%20%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%20-%201%201961eb7f1e1f80cab936f0f7a92cb629/image.png)

대부분의 패킷 스위치는 저장-후-전달 전송 방식을 이용한다.

- 출발지는 목적지로 전송할 패킷(1, 2, 3)을 가지고 있으며, 각각의 패킷은 L비트이고, 출발지는 링크에서 `L비트`의 패킷을 `R bps의 속도로 송신`한다.
- 라우터에서는 패킷의 비트를 먼저 저장하고, 패킷의 모든 비트를 수신하고 나서야 출력 링크로 패킷을 전송한다.

**경과 시간에 대한 계산**

```
1-1. 출발지에서 패킷 1을 송신하기 시작해서 패킷 1의 전체를 목적지에서 수신할 때까지의 경과 시간을 계산해보자.

```

*여기서 비트가 거쳐가는 데에 걸리는 시간인 전파 지연(propagation delay)은 무시한다*

- `0 초` : 출발지가 패킷 1을 전송하기 시작
- `L/R 초`
    - **출발지**: 패킷 1의 전체 데이터를 전송 완료 (전파 지연이 없기 때문)
    - **라우터**: ****전체 패킷이 수신되고 저장됨**,** 라우터는 목적지를 향해 출력 링크로 전송하기 시작한다.
- `2L/R 초` : 라우터는 전체 패킷을 전송했으며, 목적지는 패킷 1 전체를 수신 완료한다. (전파 지연이 없기 때문)

따라서 저장-후-전달 전송 방식을 채택한다면 전체 지연은 `2L/R`이며,

만일 저장-후-전달 없이 스위치에 비트가 도착하자마자 곧바로 전달을 하게 된다면 전체 지연은 `L/R`이 된다.

```
1-2. 출발지가 패킷 1을 송신하기 시작한 순간부터 목적지 노드가 3개의 모든 패킷(1, 2, 3)을 수신할 때까지 경과된 전체 시간을 계산해보자.
```

- `0 초` : 출발지가 패킷 1을 전송하기 시작
- `L/R 초`
    - 출발지: 패킷 2를 전송하기 시작
    - 라우터: 패킷 1을 수신 완료, 이를 전송하기 시작
- `2L/R 초`
    - 출발지: 패킷 3을 전송하기 시작
    - 라우터: 패킷 2를 수신 완료, 이를 전송하기 시작
    - 목적지: 패킷 1 전체를 수신 완료
- `3L/R 초`
    - 라우터: 패킷 3를 수신 완료, 이를 전송하기 시작
    - 목적지: 패킷 2 전체를 수신 완료
- `4L/R 초` : 목적지는 패킷 3 전체를 수신 완료

따라서 저장-후-전달 전송 방식을 채택한다면 목적지는 `4L/R` 초에 3개의 모든 패킷을 수신하게 된다.

**종단 간 지연**

```
2. 출발지로부터 목적지 노드까지 N개의 링크로 구성되고 각각은 전송률이 R인 경로를 통해 하나의 패킷을 전송하는 경우를 생각해보자.
```

즉, 출발지와 목적지 사이에 N-1개의 라우터가 존재한다는 것이다.

실제로 라우터는 보통 여러 개의 링크를 갖는데, 그 이유는 라우터의 기능이 **입력되는 패킷을 출력 링크로 교환**하는 것이기 때문이다.

1-1, 1-2와 같은 논리를 적용한다면 **종단 간 지연**은 다음과 같음을 알 수 있다.

![https://user-images.githubusercontent.com/86337233/210137330-0534c802-b6cd-41e4-915d-d8a3dac5d07a.png](https://user-images.githubusercontent.com/86337233/210137330-0534c802-b6cd-41e4-915d-d8a3dac5d07a.png)

### 큐잉 지연(queuing delay)과 패킷 손실

---

- 각 패킷 스위치는 접속된 여러 개의 **링크**를 가지고 있으며, 패킷 스위치는 **각 링크에 대해 출력 버퍼를 가지고 있다**.
- 출력 버퍼는 출력 큐로도 불리며, **그 링크로 송신하려는 패킷을 저장**하고 있다.

```
도착하는 패킷은 한 링크로 전송되어야 한다. 하지만 만약 그 링크가 다른 패킷을 전송하고 있는 중이라면 어떻게 해야 하는가?
```

**→ 도착하는 패킷은 출력 버퍼에서 대기해야 한다.** = 큐잉 지연

- 큐잉 지연은 가변적이며, 네트워크의 혼잡 정도에 따른다.
- 버퍼 공간의 크기는 유한하기 때문에 **패킷 손실(packet loss)**이 발생할 수 있다.
- 버퍼가 꽉 차 있는 경우라면 **도착하는 패킷 또는 큐에 대기 중인 패킷을 폐기(drop)**한다.

### 포워딩 테이블과 라우팅 프로토콜

---

라우터는 한 패킷을 어느 링크로 전달해야 하는지를 어떻게 결정할까?

**IP 주소**

- 인터넷에서 모든 종단 시스템은 IP 주소를 가지며, 이 주소는 계층적 구조를 갖는다.
- 패킷의 헤더에는 목적지의 IP 주소가 포함되어있다.

**포워딩 테이블(forwarding table)**

각 라우터는 **목적지 주소/ 주소의 일부를 라우터의 출력 링크로 매핑**하는 포워딩 테이블을 가지고 있다.

따라서 라우터가 패킷을 어느 링크로 전달해야하는 지는 다음과 같이 결정된다.

1. 패킷이 라우터에 수신됨
2. 라우터는 패킷의 IP주소를 조사
3. 해당 목적지 주소를 이용하여 포워딩 테이블을 검색
4. 패킷을 해당하는 출력링크로 송신

**라우팅 프로토콜(routing protocol)**

포워딩 테이블을 설정하는데 이용되는 여러 프로토콜, ****인터넷이 자동으로 설정함

## 1.3.2 회선 교환(circuit switching)

---

회선 교환 네트워크에서는 **경로상에서 필요한 자원(버퍼, 링크 전송률)은 통신 세션 동안에 확보 또는 예약**된다. (패킷 교환 네트워크와 반대)

세션 메시지는 온디맨드(on-demand) 방식으로 자원을 요청하여 사용

따라서 통신 링크에 대한 접속을 위해 큐에서 대기해야 할 수도 있다.

- 연결 = 회선(circuit) : 송신자와 수신자 간의 경로에 있는 스위치들이 해당 연결 상태를 유지해야 한다.
1. 송신자가 정보를 보내기 전, 네트워크는 송신자와 수신자 간의 **연결**을 설정해야 한다.
2. 네트워크가 회선을 설정할 때, 그 연결이 이루어지는 동안 **네트워크 링크에 일정한 전송률을 예약한다.**
3. 주어진 전송률이 송신자-수신자 연결을 위해 예약되기 때문에, **송신자는 수신자에게** 보장된(guaranteed) **일정 전송률로 데이터를 보낼 수 있다.**

### **종단 간 연결(end-to-end connection)**

아래는 4개의 스위치와 4개의 링크로 구성된 회선 교환 네트워크를 나타낸 그림이다.

이들 각 링크는 4개의 회선을 가지므로 **각 링크는 4개의 동시 연결을 지원할 수 있다.**

![https://user-images.githubusercontent.com/86337233/210137402-59bd4469-e343-430c-96df-9f5c6c072005.png](https://user-images.githubusercontent.com/86337233/210137402-59bd4469-e343-430c-96df-9f5c6c072005.png)

만약 두 호스트가 통신하고 싶을 때, 네트워크는 두 호스트 사이에 지정된 **종단 간 연결**을 설정한다.

즉, 호스트 A가 호스트 B와 통신하기 위해서 네트워크는 먼저 **A의 링크와 B의 링크 각각에서 한 회선씩을 예약**한다.

각 링크에 대하여 연결이 지속되는 동안 해당 연결은 링크 전체 전송 용량의 1/4를 얻는다. (각 링크는 4개의 회선을 가지고 있기 때문)

### **회선 교환 네트워크에서의 다중화**

링크 내 한 회선이 구현되는 방법

1. **주파수 분할 다중화(Frequency-Division Multiplexing, FDM)** : 각 회선은 **지속적으로** 해당 링크의 일부의 ****주파수 스펙트럼 대역폭를 얻는다. = 대역폭(bandwidth)
2. **시분할 다중화(Time-Division Multiplexing, TDM)** : 각 회선은 **주기적으로**(짧은 시간 즉, 슬롯 동안) **전체** 대역폭을 얻는다.
    1. 네트워크가 링크를 통해 하나의 연결을 설정할 때, 네트워크는 모든 시간을 일정주기로 나눈 프레임에서 **시간 슬롯 1개를 그 연결에 할당**한다.

### 패킷 교환 vs 회선 교환

---

전송 효율성 및 사용자 수용력 비교

| **기준** | **회선 교환** | **패킷 교환** |
| --- | --- | --- |
| **최대 지원 사용자 수** | 10명 (1 Mbps 링크 기준) | 약 35명 (동일 링크 기준) |
| **100만 비트 전송 시간** | 10초 (TDM 슬롯 제한) | 1초 (전 대역폭 활용) |
| **대역폭 활용도** | 고정 할당으로 미사용 시 낭비 발생 | 동적 공유로 유휴 자원 활용 최적화 |
| **지연 특성** | 예측 가능한 고정 지연 | 낮은 지연 (과부하 시 변동 가능) |
| **유휴 시간 효율성** | 다른 연결이 미사용 자원 활용 불가 | 유휴 자원을 즉시 재할당 |
- **대역폭 효율성**: 패킷 교환이 유휴 자원을 실시간으로 재분배하여 3.5배 더 많은 사용자를 수용.
- **전송 속도**: 단일 사용자 집중 전송 시 패킷 교환이 회선 교환보다 10배 빠름.
- **실시간 서비스 적합성**: 회선 교환은 지연 예측이 용이하지만, 패킷 교환은 네트워크 상태에 따라 지연 변동 가능.

**결론**

패킷 교환이 회선 교환보다 성능이 우수하다. 따라서 오늘날의 전기통신 네트워크의 추세는 패킷 교환으로 전환되고 있다.

## 1.3.3 네트워크의 네트워크

---

![image.png](1%E1%84%8C%E1%85%A1%E1%86%BC%20%E1%84%8F%E1%85%A5%E1%86%B7%E1%84%91%E1%85%B2%E1%84%90%E1%85%A5%20%E1%84%82%E1%85%A6%E1%84%90%E1%85%B3%E1%84%8B%E1%85%AF%E1%84%8F%E1%85%B3%E1%84%8B%E1%85%AA%20%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%20-%201%201961eb7f1e1f80cab936f0f7a92cb629/image%201.png)

### **네트워크 구조 진화**

| **구조** | **특징** |
| --- | --- |
| **구조1** | 단일 글로벌 ISP 중심 → 단일 글로벌 IP에서 모든 접속 ISP 연결 |
| **구조2** | 다중 글로벌 ISP 경쟁 → 2계층 구조(글로벌-접속) 형성 |
| **구조3** | 지역 ISP 도입 → 3계층 구조(1계층-지역-접속) |
| **구조4** | IXP·피어링 추가 → 현실적 인터넷 모델 완성 |
| **구조5** | 구글 등 CP의 사설 네트워크 확장 → 계층 우회 가능 |

## 구조 1 ~ 3

---

### **접속 ISP (Access ISP)**

- **정의**: 종단 시스템(PC, 서버 등)을 인터넷에 연결하는 최하위 계층의 서비스 제공자.
- **기능**:
    - DSL, 케이블, FTTH, 와이파이, 셀룰러 등 다양한 기술로 유/무선 접속 제공.
    - 일반 통신사 외에도 대학/기업이 직접 운영 가능 (예: 서울대 내부망, 삼성전자 사내망).
- **특징**:
    - 단독으로 글로벌 연결 불가 → 상위 ISP(지역/1계층)와 연결 필요.
    - **CP(콘텐츠 제공자) 연결**: 웹 서버·비디오 플랫폼을 인터넷에 직접 연동.

### **글로벌 ISP (Tier 1)**

- **주요 업체**:
    - Lumen(미국), Arelion(스웨덴), NTT(일본), Tata(인도), Deutsche Telekom(독일)
        - 국내에 순수 1계층 ISP 없음 → KT·SKT는 Tier-2로 분류
- **역할**: 글로벌 네트워크 운영
    - Lumen Technologies는 885,139km의 광케이블로 북미, 유럽, 아시아를 연결.
    - Arelion(구 Telia Carrier)은 유럽 95% 지역을 **1홉(hop)** 내로 커버.
- **비즈니스 모델**:
    - 접속 ISP에게 연결 비용 청구 (고객-제공자 관계).
    - 예: 10만 개 접속 ISP 연결 시 연간 $1억 이상 수익 창출 가능.
- **특징**:
    - 글로벌 백본망 보유 (예: Lumen의 88만 km 광케이블).
    - 다른 1계층 ISP와 **무료 피어링** (예: AT&T ↔ NTT).

### **지역 ISP (Regional ISP) (Tier2, 3)**

- **Tier-2**: 국가 단위 서비스 (KT, SKT 등)
- **Tier-3**: 지역 케이블 업체 (예: CJ헬로비전)
- **위치**: 특정 지리적 영역에서 운영.
- **역할**:
    - 접속 ISP들을 1계층 ISP에 연결하는 중간 계층.
- **비용 흐름**:
    - 접속 ISP → 지역 ISP → 1계층 ISP (계층당 약 30% 마진).
    

---

## 구조 4

### **PoP (Points of Presence)**

- ISP 네트워크 내 특정 지점에 설치된 **라우터 클러스터.**
- **연결 방식**:
    - 고객 ISP ↔ 제공자 ISP의 PoP 라우터 직접 연결.
    - 예: SKT가 AWS 서울 리전과 PoP 연결 시 평균 지연 5ms 달성.
- **계층 적용**:
    - 1계층·지역 ISP에 필수적, 접속 ISP는 선택적 설치.

### **멀티홈 (Multi-homing)**

- **둘 혹은 그 이상의 제공자 ISP에 연결하는 것**
- 1계층 ISP를 제외한 모든 ISP는 멀티홈을 선택할 수 있다.
- **목적**: 연결 신뢰성 향상 + 비용 분산.
- **사례**:
    - 네이버: KT·LG U+ 동시 연결 → 한 ISP 장애 시 트래픽 전환.
    - 스타벅스 WiFi: SKT·LGU+ 무선망 병행 사용.

### **피어링 (Peering)**

- 고객 ISP가 서비스 제공 ISP에게 지불하는 요금을 줄이기 위해 **인터넷 계층구조의 같은 계층에 있는 가까운 ISP들은 피어링할 수 있다.**(두 ISP가 피어링하면 일반적으로 서로 요금을 지불하지 않음)
- 이들 간에 송수신되는 모든 트래픽을 **상위 계층 ISP를 통하지 않고 직접 송수신할 수 있도록** 자신들의 네트워크를 서로 직접 연결하는 것이다.
- 1계층 ISP들도 서로 피어링할 수 있다.
- **유형**:
    - **공개 피어링**: IXP 내 다수 ISP와 연결 (비용 무료).
    - **비공개 피어링**: 두 ISP간 직접 연결 (예: 넷플릭스 ↔ SKT).
- **조건**: 트래픽 양이 균형적일 때 성립 (95:5 비율시 유료화).
- **효과**:
    - 유튜브 동영상 로딩 시간 30% 감소 (IXP 피어링 사례).

### **8. IXP (Internet Exchange Point)**

- 다중의 ISP들이 서로 피어링할 수 있는 만남의 장소 - PoP, 피어링
- **물리적 구조**:
    - 교환기(스위치) 중심의 독립 건물 (예: 서울 IXP는 구로디지털단지 소재).
    - 100Gbps 이상 고속 포트 제공.
- **글로벌 현황**:
    - 세계 950개 IXP 중 80%가 유럽·북미에 집중 (한국은 3개).
- **트래픽 처리**:
    - 2023년 프랑크푸르트 IXP 일일 트래픽 15Tbps 기록.

---

## 구조 5

### **콘텐츠 제공 네트워크**

- **주체**: 구글·메타·넷플릭스 등 대형 콘텐츠 사업자.
- 구글 데이터 센터는 모두 구글의 사설 TCP/IP 네트워크를 통해 연결되어 있으며, 이 네트워크는 전 세계를 연결하며 공중 인터넷과는 분리되어 있다.
- **구글 사설 네트워크는 구글 서버로 오가는 트래픽만 전달한다.**
- **전략**:
    - 자체 광케이블 구축 (예: 구글의 **Curie** 해저케이블).
    - IXP/ISP와 직접 피어링 → 1계층 ISP 우회.
- **효과**:
    - 유튜브 트래픽 전송 비용 60% 절감 (2018년 구글 발표).
    - AWS의 **Direct Connect** 서비스: 기업-클라우드 간 전용 회선 제공.
    - 최종 사용자들에게 자신들의 서비스가 궁극적으로 어떻게 전달되는지에 대한 더 많은 통제권을 가질 수 있다.

# 1.4 패킷 교환 네트워크에서의 지연, 손실과 처리율

---

> 인터넷은 종단 시스템에서 수행되는 분산 애플리케이션에게 서비스를 제공하는 인프라스트럭처이다. (1.1절)
> 

이상적으로는 인터넷 서비스가 데이터의 손실 없이 즉시 두 종단 시스템 간에 원하는 만큼의 데이터를 이동시키기를 원한다.

하지만 현실에서 이는 어려우며, 컴퓨터 네트워크는 두 종단 시스템 간에 전달될 수 있는 초당 데이터의 양, 즉 **처리율을 제한한다.**

**이로 인해 종단 시스템 간에 지연이 발생하며, 패킷을 잃어버리게 되기도 한다.**

## 1.4.1 패킷 교환 네트워크에서의 지연 개요

---

패킷은 한 호스트(출발지)에서 시작하고 라우터들을 통과하며 다른 호스트(목적지)에 도달한다.

패킷이 경로를 따라 한 노드에서 다음 노드로 전달될 때 패킷은 경로상의 **각 노드에서** 다양한 지연을 겪게 되며, 이들이 쌓여서 **전체 노드 지연(total nodal delay)**을 일으킨다.

- **노드 처리 지연(nodal processing delay)**
- **큐잉 지연(queuing delay)**
- **전송 지연(transmission delay)**
- **전파 지연(propagation delay)**

![https://user-images.githubusercontent.com/86337233/210216460-d4e1eacc-cde9-4185-aca8-661e78a20427.png](https://user-images.githubusercontent.com/86337233/210216460-d4e1eacc-cde9-4185-aca8-661e78a20427.png)

**처리 지연(processing delay)**

> 라우터가 패킷 헤더를 조사하고 그 패킷을 어디로 보낼지 결정하는 시간
> 
- 라우터 A로 패킷의 비트를 전송할 때 업스트림 노드에서 발생하는 ****패킷의 비트 레벨 오류를 조사하는 데 필요한 시간과 같은 요소를 포함할 수도 있다.
- 라우터는 이 노드를 처리 후, 그 패킷을 라우터 B에 이르는 링크에 앞선 큐에 보낸다.
- 고속 라우터의 처리 지연은 일반적으로 수 마이크로초이다.

**큐잉 지연(queuing delay)**

> 패킷이 큐에서 링크로 전송되기를 기다리는 시간
> 
- 특정 패킷의 큐잉 지연 길이는 큐에 저장되어 링크로 전송되기를 기다리는, **앞서 도착한 다른 패킷의 수에 의해 결정된다.**
- 주어진 패킷의 지연은 패킷마다 상당히 다르다.
    - 큐가 비어있고 다른 패킷이 전송 중인 상태가 아니라면 패킷의 큐잉 지연이 0이다.
    - 트래픽이 많고 다른 많은 패킷이 전송 대기 중이라면 패킷의 큐잉 지연이 매우 길어진다.
- 수 마이크로초 ~ 수 밀리초

**전송 지연(transmission delay) → 1.3.1에서 살펴봄**

> 패킷의 모든 비트를 링크로 밀어내는 데(또는 전송하는 데) 필요한 시간
> 

패킷이 **선입선출(FIFO)** 방식으로 전송된다고 가정해보자. (앞서 도착한 다른 모든 패킷이 전송된 다음에 전송)

패킷의 길이는 `L 비트`, 라우터 A에서 라우터 B까지 링크의 전송률은 `R bps`라고 해보자. (R는 라우터 B로 가는 링크의 전송률에 의해 결정됨)

이때 전송 지연은 `L/R`이다. (수 마이크로초 ~ 수 밀리초)

**전파 지연(propagation delay)**

> 비트가 라우터 A 상에서의 링크에서 라우터 B까지의 전파에 필요한 시간
> 
- 비트는 링크의 전파 속도로 전파된다.
- 전파 속도는 링크의 물리 매체(광섬유, 꼬임쌍선 등)에 따라 다르며, 범위는 2×(10^8)미터/초 ~ 3×(10^8)미터/초이다.→ 빛의 속도와 같거나 약간 작다.

라우터 A와 B 사이의 거리를 `d`, 링크의 전파 속도를 `s`라고 한다면 전파 지연은 `d/s`이다. (일반적으로 수 밀리초)

**전송 지연(transmission delay)과 전파 지연(propagation delay)의 비교**

**전송 지연**

- **라우터가 패킷을 내보내는 데** 필요한 시간
- 패킷 길이와 링크 전송률의 함수 → 두 라우터 사이의 거리와는 관계가 없다.

**전파 지연**

- 비트가 **한 라우터에서 다음 라우터로 전파되는 데** 걸리는 시간
- 두 라우터 사이의 거리에 대한 함수 → 패킷 길이나 링크 전송률과는 관계가 없다.

### **전체 노드 지연(total nodal delay)**

---

> 전체 노드 지연 = 처리 지연 + 큐잉 지연 + 전송 지연 + 전파 지연
> 

각각 지연 요소의 기여도에는 상당한 차이가 존재한다.

**전파 지연(propagation delay)**

- 내부의 두 라우터를 연결하는 링크에서는 2마이크로초 정도 → 무시 가능
- 정지 위성 링크로 연결된 두 라우터의 경우 수백 밀리초 → 전체 노드 지연의 주요 요소가 된다.

**전송 지연(transmission delay)**

- LAN처럼 10 Mbps 이상의 전송률인 경우 → 무시 가능
- 저속 다이얼업 모뎀 링크에서 보내지는 인터넷 패킷은 수백 밀리초에 이를 수 있다.

**처리 지연(nodal processing delay)**

- 이는 보통 전체 노드 지연에서는 무시될 수 있다.
- 하지만 라우터가 패킷을 전달할 수 있는 최대율(최대 속도)에는 상당한 영향을 준다.

## **1.4.2 큐잉 지연과 패킷 손실**

---

**노드 지연(한 라우터에서의 지연)**에 대하여 알아보자.

다른 세 가지 지연과 다르게, 큐잉 지연은 패킷마다 다를 수 있다.

e.g., 10개의 패킷이 동시에 비어 있는 큐에 도착한다면?

- 전송된 첫 패킷은 큐잉 지연을 겪지 않는다.
- 마지막으로 전송되는 패킷은 많은 큐잉 지연을 겪게 된다. (다른 9개 패킷이 전송되기를 기다림)

따라서 큐잉 지연의 특성 묘사는 평균 큐잉 지연, 큐잉 지연의 분산, 큐잉 지연이 어느 특정 값을 넘을 확률 같은 **통계 측정을 일반적으로 이용한다.**

### **큐잉 지연을 결정하는 주 요소들**

- 트래픽이 큐에 도착하는 비율
- 링크의 전송률
- 도착하는 트래픽의 특성 (트래픽이 주기에 맞춰서 또는 버스트(burst)하게 도착하는가?)

---

아래의 상황을 가정해보자.

```
패킷이 큐에 도착하는 평균 : **a 패킷/초**
모든 패킷은 **L 비트**
전송률(패킷이 큐에서 밀려나는 비율) : **R 비트/초**
큐가 매우 커서 무한대 비트를 저장할 수 있음
```

이때 `트래픽 강도`(traffic intensity, **비트가 큐에 도착하는 평균율**)은 `La/R` 비트/초다.

(트래픽 강도는 큐잉 지연의 정도를 측정하는 데에 매우 중요)

`La/R > 1`이라면 **비트가 큐에 도착하는 평균율이 비트가 큐에서 전송되는 비율을 초과한다**는 것을 의미한다.

따라서 큐는 끝없이 증가, 큐잉 지연은 무한대에 도달한다. *→ 트래픽 강도가 1보다 크지 않게 시스템을 설계해야 한다.*

`La/R ≤ 1`인 경우에는 도착 트래픽의 특성이 큐잉 지연에 영향을 미친다.

- 하나의 패킷이 L/R 초마다 주기적으로 도착한다면 모든 패킷은 빈 큐에 도착 → 큐잉 지연은 없을 것이다.
- 패킷이 몰려서(burst) 도착한다면 상당한 **평균 큐잉 지연이 발생**할 것이다.

---

일반적으로 패킷의 도착에는 고정된 패턴이 없고, 임의의 시간만큼 떨어져서 도착하게 된다. (random)

아래 그래프는 **트래픽 강도에 대한 평균 큐잉 지연의 질적 의존도**를 나타낸다.

![https://user-images.githubusercontent.com/86337233/210216463-79992219-167f-4340-ab30-31383deac4d3.png](https://user-images.githubusercontent.com/86337233/210216463-79992219-167f-4340-ab30-31383deac4d3.png)

> 트래픽 강도가 1에 접근할수록 평균 큐잉 지연이 급속히 증가한다.
> 
- 트래픽 강도가 0에 가까울 경우
    - 패킷 도착이 드물고 간격이 멀어서 다음에 도착하는 패킷이 큐에서 다른 패킷을 발견하는 경우가 없다.
    - 따라서 평균 큐잉 지연은 0에 가까워진다.
- 트래픽 강도가 1에 가까울 경우
    - 패킷 도착이 전송용량을 초과하여 큐가 생성될 것이다.
    - 도착률이 전송률보다 작아질 때 큐의 길이가 줄어든다.

### **패킷 손실**

큐는 **유한 용량**을 가지며 스위치 설계와 비용에 크게 의존한다.

즉, 트래픽 강도가 1에 접근함에 따라 패킷 지연이 무한대가 되진 않으며, 대신 큐가 꽉 차게 된다.

> 큐가 꽉 차서 패킷을 저장할 수 없는 경우에 라우터는 그 패킷을 버린다(drop).
> 
- **손실 패킷의 비율은 트래픽 강도가 클수록 증가한다.**
- 모든 데이터가 궁극적으로 목적지까지 전달되었음을 보장하기 위해 손실 패킷은 종단 간에 **재전송**될 수 있다.

정리하자면, **노드에서의 성능 측정 요소**는 다음의 두 가지이다.

- 지연 정도
- 패킷 손실 확률

## **1.4.3 종단 간 지연**

---

**출발지에서 목적지까지의 지연**에 대하여 알아보기 위해, 다음의 상황을 생각해보자.

```
출발지 호스트와 목적지 호스트 사이에 N-1개의 라우터가 있다.
네트워크가 혼잡하지 않아 큐잉 지연을 무시할 수 있다.
각 호스트와 출발지 호스트에서의 전송률은 R 비트/초이다.
패킷의 크기는 L 비트이다.

```

> 종단 간 지연 = N(처리 지연 + 전송 지연(L/R) + 전파 지연)
> 

*이는 1.3절에서 언급한, 처리와 전파 지연을 고려하지 않은 종단 간 지연 식을 일반화한 것이다.*

![https://user-images.githubusercontent.com/86337233/210137330-0534c802-b6cd-41e4-915d-d8a3dac5d07a.png](https://user-images.githubusercontent.com/86337233/210137330-0534c802-b6cd-41e4-915d-d8a3dac5d07a.png)

## **1.4.4 컴퓨터 네트워크에서의 처리율**

---

컴퓨터 네트워크에서의 주요한 성능 수단은 다음의 세 가지이다.

- 지연 정도
- 패킷 손실 확률
- **종단 간 처리율(throughput)**

**종단 간 처리율(throughput)**은 데이터 전송 경로상의 **병목 링크(bottleneck link)**와 **트래픽 경합 상황**에 의해 결정됨.

1. **병목 링크**가 처리율의 상한을 결정
2. **트래픽 경합** 시 공유 링크의 분할 용량이 처리율 제약 요인
3. 현실 인터넷 환경에서는 접속 링크나 공유 링크가 주요 제한 요소로 작용

## **기본 원칙: 병목 링크의 전송률**

1. **단일 경로 전송**
    - 2개 링크(Rs: 서버-라우터, Rc: 라우터-클라이언트)의 경우:→ 처리율 = min{Rs, Rc}*(예: Rs=100Mbps, Rc=1Gbps → 처리율 100Mbps)*
    - N개 링크(R₁, R₂, ..., Rₙ)의 경우:→ 처리율 = min{R₁, R₂, ..., Rₙ}
2. **인터넷 코어 환경**
    - 접속 링크(Rs, Rc)가 코어 링크보다 느린 경우:→ 처리율 = min{Rs, Rc}*(인터넷 코어는 일반적으로 고속이므로 접속 링크가 제한 요소)*

## **공유 자원의 영향: 트래픽 경합**

- **동시 다운로드 시나리오** 코어에 공유 링크(R)가 있고 10개의 다운로드가 진행될 때:→ 각 다운로드 처리율 = R / 10*(예: R=5Mbps, 10개 연결 → 각각 500kbps)*
    
    > 공유 링크의 총 대역폭이 분할되며, 이때 공유 링크가 새로운 병목 지점이 됨.
    >